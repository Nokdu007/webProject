
<div class="cart-container">
  @if(cartService.getTotal() == 0 ){
    <h2>Cart is empty</h2>
    <a href="" routerLink="/">View Product Details</a>
  }
@for(item of cartService.getCartItems(); track item.id) {
    <div class="cart-item">
    <input type="checkbox" [(ngModel)]="item.is_selected" (change)="updateTotal()">
      <img [src]="item.image" alt="{{item.title}}">
      <div class="item-info">
        <h4>{{item.title}}</h4>
        <p>{{item.description}}</p>
      </div>
      <div class="item-price">${{item.price | currency}}</div>
        <div class="item-quantity">
          <button class="minus" (click)="cartService.updateQty(item.id, item.qty - 1);  updateTotal()">-</button>
          <input type="number" [(ngModel)]="item.qty" 
          (change)="cartService.updateQty(item.id, item.qty); updateTotal()" >
          <button class="plus" (click)="cartService.updateQty(item.id, item.qty + 1); updateTotal()">+</button>
        </div>
      <div class="item-remove">
        <button (click)="cartService.removeFromCart(item.id)">Remove</button>
      </div>
    </div>
 }
 @if(cartService.getTotal() > 0){
  <div class="cart-summary">
  <h3>Grand Total:{{ cartService.getTotalSelected() | currency }}</h3>
  <button (click)="openInvoice()">Checkout</button>
  </div>
 }
</div>
<!-- =================// -->
<div class="invoice-popup" [class.show]="showInvoice">
  <div class="popup-content">
    <h2>Invoice</h2>
    <table>
      <thead>
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        @for(item of cartService.getCartItems(); track item.id ){
          <tr >
            <td><img [src]="item.image" alt="{{item.name}}" width="50"></td>
            <td>{{item.title}}</td>
            <td>{{item.qty}}</td>
            <td>{{item.price | currency}}</td>
            <td>{{item.qty * item.price | currency}}</td>
          </tr>
        }
      </tbody>
    </table>
    <div class="invoice-total">
      <strong>Total:{{getTotal() | currency}} </strong>
    </div>
    <div class="btninvoice">
      <button class="btnclose" (click)="closeInvoice()">Close</button>
      <button class="btnpay" (click)="payInvoice()">Pay</button>
    </div>
  </div>
</div>